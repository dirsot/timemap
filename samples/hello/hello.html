<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDXQPCdAk1bBOqVaEbyBX7CAMFLrUkS4WM&sensor=true">
    </script>
	<script src="MStatusBar.js"></script>
    <script type="text/javascript">
	var markersArray = [];
	var map;
	var infoWindow = new google.maps.InfoWindow;
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(51.397, 21.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
		google.maps.event.addListener(map, 'click', function(event) {addMarker(event.latLng);});
		
		initMarkers();
		
		var statusBarContainer = document.getElementById('statusDiv');
	var statusbar = new MStatusBar({map:map,container1:statusBarContainer});
      }
	  function addMarker(location) {
		marker = new google.maps.Marker({
		position: location,
		map: map,
		title:"ddf"
		});
	  markersArray.push(marker);
	}
	
	  function initMarkers(){
	  var image = 'https://developers.google.com/maps/documentation/javascript/examples/images/beachflag.png';
		marker = new google.maps.Marker({
		position: new google.maps.LatLng(51.397, 21.644),
		map: map,
		title:"ddf",
		clickable : true,
		draggable:true,
		shadow:"false",
		icon: image
		
		});
		google.maps.event.addListener(marker, 'click', onMarkerClick);
	  markersArray.push(marker);
	  }
	  
	      var onMarkerClick = function() {
      var marker = this;
      var latLng = marker.getPosition();
      infoWindow.setContent('<h3>'+marker.getTitle()+'Marker position is:</h3>' +
          latLng.lat() + ', ' + latLng.lng());

      infoWindow.open(map, marker);
    };
    </script>
  </head>
  <body onload="initialize()">
	<p onclick="alert(markersArray[0].title)">Zapisz</p>
    <div id="map_canvas" style="width:800px; height:500px"></div>
	<div id="statusDiv" style="width:800px; height:100px"></div>
  </body>
</html>